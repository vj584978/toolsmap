<!DOCTYPE html>
<html>
    <head>
        <title>身分證字號產生器</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/general.css" rel="styleSheet">
        <script>
            const plid=new Map([["A",10],["B",11],["C",12],["D",13],["E",14],["F",15],["G",16],
                                    ["H",17],["J",18],["K",19],["L",20],["M",21],["N",22],["P",23],
                                    ["Q",24],["R",25],["S",26],["T",27],["U",28],["V",29],["W",30],
                                    ["X",31],["Y",32],["Z",33],["I",34],["O",35]]);
            function gen()
            {
                var no1=["A","B","C","D","E","F","G","H","I","J","K","J","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];
                var no1len=no1.length;
                var n1r=Math.floor(Math.random()*no1len);
                var n1=no1[n1r];
                var n2=Math.floor(Math.random()*2+1);
                
                var out="";
                for(var i=0;i<8;i++)
                {
                    var nr=Math.floor(Math.random()*10);
                    out+=nr;
                }
                var nox9=n2+out;
                check(n1,nox9);
            }
            function check(a,b)
            {
                var perw=new Array(1,9,8,7,6,5,4,3,2,1,1);                              
                var pidin=b.toString().split('');
                var e2n=plid.get(a).toString().split('');
                var pidB=e2n.concat(pidin);
                var count=0;                                                  
                for(var i=0;i<11;i++)                                          
                {
                    count+=perw[i]*pidB[i];
                }
                if(count%10===0)                                       
                {
                    document.getElementById("output").value=a+b;
                }else
                {
                     gen();
                }
            }

        </script>
    </head>
    <body>
        <div class='d-flex aj-center'>
            <div>
                <h1>身分證字號產生機</h1>
                <div class='d-flex aj-center'>
                    <input type="text" maxlength="10" id="output">
                    <input type="button" value="生成" onclick="gen()">
                </div>
            </div>
        </div>
    </body>
</html>
